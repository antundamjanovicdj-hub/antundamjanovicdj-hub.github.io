<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LifeKompas</title>

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body {
  width: 100%;
  height: 100%;
  overflow-x: hidden;
}
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: linear-gradient(135deg, #1f6f4a, #2e8b57);
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
}

/* SCREENS */
.screen {
  display: none;
  width: 100%;
  max-width: 420px;
  padding: 20px;
  animation: fade 0.35s ease;
}
.screen.active { display: block; }

@keyframes fade {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* FIRE TITLE */
.fire {
  font-size: 3.2rem;
  font-weight: 900;
  text-align: center;
  background: linear-gradient(90deg, #ff8c00, #ffd700, #ff4500);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: fire 6s linear infinite;
  margin-bottom: 2rem;
}
@keyframes fire {
  to { background-position: 200% center; }
}

/* BUTTONS */
.buttons {
  display: flex;
  flex-direction: column;
  gap: 14px;
}
button {
  padding: 14px;
  font-size: 1.1rem;
  border-radius: 30px;
  border: none;
  cursor: pointer;
  background: rgba(255,255,255,0.9);
}

/* TOP RIGHT */
.top-right {
  position: absolute;
  top: 15px;
  right: 15px;
}

/* FORM */
input, textarea {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  border-radius: 12px;
  border: none;
  font-size: 1rem;
}

textarea { resize: vertical; }

/* MOODS */
.moods {
  display: flex;
  justify-content: space-around;
  font-size: 2.2rem;
  margin: 12px 0;
}
.moods span {
  cursor: pointer;
  opacity: 0.4;
}
.moods span.active { opacity: 1; }
</style>
</head>

<body>

<!-- HOME -->
<div id="home" class="screen active">
  <div class="fire">LifeKompas</div>
  <div class="buttons">
    <button onclick="selectLang('hr')">ğŸ‡­ğŸ‡· Hrvatski</button>
    <button onclick="selectLang('de')">ğŸ‡©ğŸ‡ª Deutsch</button>
    <button onclick="selectLang('en')">ğŸ‡¬ğŸ‡§ English</button>
  </div>
</div>

<!-- MENU -->
<div id="menu" class="screen">
  <button class="top-right" onclick="goHome()">â†</button>
  <div class="buttons">
    <button onclick="openDiary()"><span id="btnDiary"></span></button>
    <button disabled id="btnFamily"></button>
    <button disabled id="btnHealth"></button>
    <button disabled id="btnFinance"></button>
  </div>
</div>

<!-- DIARY -->
<div id="diary" class="screen">
  <button class="top-right" onclick="goMenu()">â†</button>

  <input type="date" id="date">
  <input type="text" id="title">
  <textarea id="text" rows="6"></textarea>

  <div class="moods">
    <span onclick="setMood('ğŸ˜Š')">ğŸ˜Š</span>
    <span onclick="setMood('ğŸ˜')">ğŸ˜</span>
    <span onclick="setMood('ğŸ˜')">ğŸ˜</span>
  </div>

  <button onclick="saveEntry()" id="btnSave"></button>
  <button onclick="deleteEntry()" id="btnDelete"></button>
</div>

<script>
let lang = localStorage.getItem("lang") || "hr";
let mood = "";

const T = {
  hr: {
    diary: "ğŸ“” Dnevnik",
    family: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Obitelj i prijatelji",
    health: "â¤ï¸ Zdravlje",
    finance: "ğŸ’° Financije",
    title: "Naslov dana",
    text: "DogaÄ‘anja...",
    save: "ğŸ’¾ Spremi",
    del: "ğŸ—‘ ObriÅ¡i"
  },
  de: {
    diary: "ğŸ“” Tagebuch",
    family: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Familie & Freunde",
    health: "â¤ï¸ Gesundheit",
    finance: "ğŸ’° Finanzen",
    title: "Titel des Tages",
    text: "Ereignisse...",
    save: "ğŸ’¾ Speichern",
    del: "ğŸ—‘ LÃ¶schen"
  },
  en: {
    diary: "ğŸ“” Diary",
    family: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family & Friends",
    health: "â¤ï¸ Health",
    finance: "ğŸ’° Finance",
    title: "Day title",
    text: "Events...",
    save: "ğŸ’¾ Save",
    del: "ğŸ—‘ Delete"
  }
};

function show(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function applyLang() {
  btnDiary.textContent = T[lang].diary;
  btnFamily.textContent = T[lang].family;
  btnHealth.textContent = T[lang].health;
  btnFinance.textContent = T[lang].finance;
  title.placeholder = T[lang].title;
  text.placeholder = T[lang].text;
  btnSave.textContent = T[lang].save;
  btnDelete.textContent = T[lang].del;
}

function selectLang(l) {
  lang = l;
  localStorage.setItem("lang", l);
  applyLang();
  show("menu");
}

function goHome(){ show("home"); }
function goMenu(){ show("menu"); }

function openDiary(){
  date.value = new Date().toISOString().slice(0,10);
  loadEntry();
  show("diary");
}

function setMood(m){
  mood = m;
  document.querySelectorAll(".moods span").forEach(s=>s.classList.remove("active"));
  [...document.querySelectorAll(".moods span")].find(s=>s.textContent===m).classList.add("active");
}

function saveEntry(){
  const d = date.value;
  const data = { title: title.value, text: text.value, mood };
  localStorage.setItem("diary-"+d, JSON.stringify(data));
  alert("OK");
}

function loadEntry(){
  const d = date.value;
  const s = localStorage.getItem("diary-"+d);
  if(!s){ title.value=""; text.value=""; mood=""; return; }
  const e = JSON.parse(s);
  title.value = e.title;
  text.value = e.text;
  if(e.mood) setMood(e.mood);
}

function deleteEntry(){
  localStorage.removeItem("diary-"+date.value);
  title.value=""; text.value=""; mood="";
  document.querySelectorAll(".moods span").forEach(s=>s.classList.remove("active"));
}

applyLang();
</script>

</body>
</html>
