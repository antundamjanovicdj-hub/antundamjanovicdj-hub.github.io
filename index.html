<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LifeKompas</title>

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  min-height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: linear-gradient(135deg, #1f6f4a, #2e8b57);
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
}

.screen {
  display: none;
  width: 100%;
  max-width: 420px;
  padding: 20px;
  animation: fade 0.4s ease;
}

.screen.active { display: block; }

@keyframes fade {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

h1 {
  text-align: center;
  font-size: 3rem;
  margin-bottom: 1.5rem;
}

.buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

button {
  padding: 14px;
  font-size: 1.1rem;
  border-radius: 30px;
  border: none;
  cursor: pointer;
  background: rgba(255,255,255,0.85);
}

.top-right {
  position: absolute;
  top: 15px;
  right: 15px;
}

textarea, input[type="text"], input[type="date"] {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
  border-radius: 10px;
  border: none;
}

.moods {
  display: flex;
  justify-content: space-around;
  font-size: 2rem;
  margin: 10px 0;
}
.moods span {
  cursor: pointer;
  opacity: 0.5;
}
.moods span.active { opacity: 1; }
</style>
</head>

<body>

<!-- HOME -->
<div id="home" class="screen active">
  <h1>LifeKompas</h1>
  <div class="buttons">
    <button onclick="selectLang('hr')">ğŸ‡­ğŸ‡· Hrvatski</button>
    <button onclick="selectLang('de')">ğŸ‡©ğŸ‡ª Deutsch</button>
    <button onclick="selectLang('en')">ğŸ‡¬ğŸ‡§ English</button>
  </div>
</div>

<!-- MENU -->
<div id="menu" class="screen">
  <button class="top-right" onclick="goHome()">â†</button>
  <div class="buttons">
    <button onclick="openDiary()">ğŸ“” Dnevnik</button>
    <button disabled>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Obitelj i prijatelji</button>
    <button disabled>â¤ï¸ Zdravlje</button>
    <button disabled>ğŸ’° Financije</button>
  </div>
</div>

<!-- DIARY -->
<div id="diary" class="screen">
  <button class="top-right" onclick="goMenu()">â†</button>

  <input type="date" id="date">
  <input type="text" id="title" placeholder="Naslov dana">
  <textarea id="text" rows="6" placeholder="DogaÄ‘anja..."></textarea>

  <div class="moods">
    <span onclick="setMood('ğŸ˜Š')">ğŸ˜Š</span>
    <span onclick="setMood('ğŸ˜')">ğŸ˜</span>
    <span onclick="setMood('ğŸ˜')">ğŸ˜</span>
  </div>

  <button onclick="saveEntry()">ğŸ’¾ Spremi</button>
  <button onclick="deleteEntry()">ğŸ—‘ ObriÅ¡i</button>
</div>

<script>
let lang = localStorage.getItem("lang") || "hr";
let mood = "";

const texts = {
  hr: { diary: "ğŸ“” Dnevnik" },
  de: { diary: "ğŸ“” Tagebuch" },
  en: { diary: "ğŸ“” Diary" }
};

function show(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function selectLang(l) {
  lang = l;
  localStorage.setItem("lang", l);
  show("menu");
}

function goHome() { show("home"); }
function goMenu() { show("menu"); }

function openDiary() {
  document.getElementById("date").value = new Date().toISOString().slice(0,10);
  loadEntry();
  show("diary");
}

function setMood(m) {
  mood = m;
  document.querySelectorAll(".moods span").forEach(s => s.classList.remove("active"));
  [...document.querySelectorAll(".moods span")].find(s => s.textContent === m).classList.add("active");
}

function saveEntry() {
  const date = date.value;
  const data = {
    title: title.value,
    text: text.value,
    mood
  };
  localStorage.setItem("diary-" + date, JSON.stringify(data));
  alert("Spremljeno");
}

function loadEntry() {
  const date = document.getElementById("date").value;
  const saved = localStorage.getItem("diary-" + date);
  if (!saved) return;
  const d = JSON.parse(saved);
  title.value = d.title;
  text.value = d.text;
  if (d.mood) setMood(d.mood);
}

function deleteEntry() {
  const date = document.getElementById("date").value;
  localStorage.removeItem("diary-" + date);
  title.value = "";
  text.value = "";
  mood = "";
  document.querySelectorAll(".moods span").forEach(s => s.classList.remove("active"));
}
</script>

</body>
</html>
