<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>LifeKompas</title>

  <link rel="manifest" href="manifest-v2.json?v=2" />
  <link rel="icon" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="LifeKompas">
  <meta name="theme-color" content="#0d5e32">

  <link rel="stylesheet" href="styles/main.css">
</head>

<body>

<!-- LANGUAGE SCREEN ‚Äî TEKST + TOPLA BOJA -->
<div id="screen-lang" class="screen active">
  <div class="lang-splash">
    <div class="lang-labels">
      <h1 class="lang-top">LIFE</h1>
      <svg width="320" height="320" viewBox="0 0 320 320" class="lang-circle-svg">
        <g class="lang-item" data-lang="hr">
          <circle cx="160" cy="60" r="32" fill="#ffcc80" class="lang-dot"/>
          <text x="160" y="60" class="lang-flag">HR</text>
        </g>
        <g class="lang-item" data-lang="en">
          <circle cx="230" cy="90" r="32" fill="#ffcc80" class="lang-dot"/>
          <text x="230" y="90" class="lang-flag">US</text>
        </g>
        <g class="lang-item" data-lang="de">
          <circle cx="260" cy="160" r="32" fill="#ffcc80" class="lang-dot"/>
          <text x="260" y="160" class="lang-flag">DE</text>
        </g>
        <g class="lang-item" data-lang="ru">
          <circle cx="230" cy="230" r="32" fill="#ffcc80" class="lang-dot"/>
          <text x="230" y="230" class="lang-flag">RU</text>
        </g>
        <g class="lang-item" data-lang="pt">
          <circle cx="160" cy="260" r="32" fill="#ffcc80" class="lang-dot"/>
          <text x="160" y="260" class="lang-flag">PT</text>
        </g>
        <g class="lang-item" data-lang="tr">
          <circle cx="90" cy="230" r="32" fill="#ffcc80" class="lang-dot"/>
          <text x="90" y="230" class="lang-flag">TR</text>
        </g>
        <g class="lang-item" data-lang="zh">
          <circle cx="60" cy="160" r="32" fill="#ffcc80" class="lang-dot"/>
          <text x="60" y="160" class="lang-flag">CN</text>
        </g>
        <g class="lang-item" data-lang="ja">
          <circle cx="90" cy="90" r="32" fill="#ffcc80" class="lang-dot"/>
          <text x="90" y="90" class="lang-flag">JP</text>
        </g>
      </svg>
      <h1 class="lang-bottom">KOMPAS</h1>
    </div>
  </div>
</div>

<div class="app">

  <!-- MENU -->
  <div id="screen-menu" class="screen">
    <button class="back" id="backMenu">‚Üê</button>
    <div class="content">
      <div class="buttons">
        <button class="btn menu-btn" id="btnTasks" tabindex="-1">
          <span class="menu-icon">üß≠</span>
          <span class="menu-text"></span>
        </button>
      </div>
    </div>
  </div>

  <!-- TASKS -->
  <div id="screen-tasks" class="screen">
    <button class="back" id="backTasks">‚Üê</button>
    <div class="content scroll">
      <label id="tTitleL"></label>
      <input id="taskTitle">
      <label id="tNoteL"></label>
      <textarea id="taskNote"></textarea>
      <label id="tCatL"></label>
      <select id="taskCategory"></select>
      <label id="tDateL"></label>
      <input type="date" id="taskDate">
      <label id="tTimeL"></label>
      <input type="time" id="taskTime">
      <label id="tRemL"></label>
      <select id="taskReminder">
        <option value="0">‚Äî</option>
        <option value="30">30 min</option>
        <option value="60">1 h</option>
        <option value="120">2 h</option>
        <option value="1440">1 dan</option>
      </select>

      <div id="reminderHint" class="reminder-hint hidden"></div>

      <div class="calendar-box">
        <label class="calendar-label">
          <input type="checkbox" id="addToCalendar" checked>
          <span id="calendarLabel"></span>
        </label>
      </div>

      <button class="btn" id="saveTask"></button>
      <button class="btn" id="btnByDay"></button>

      <div id="taskList"></div>
      <div id="calendarInfo" class="note"></div>
    </div>
  </div>

</div>

<!-- POPUP -->
<div id="dayPopup" class="popup">
  <div class="popup-box">
    <div class="popup-header">
      <strong id="popupTitle"></strong>
      <button id="closeDayPopup">‚úï</button>
    </div>
    <label id="popupDateLabel"></label>
    <input type="date" id="popupDate">
    <div id="popupTasks"></div>
  </div>
</div>

<!-- SKRIPTOVE U REDOSLIJEDU -->
<script src="core/i18n.js"></script>
<script src="core/ui.js"></script>
<script src="modules/tasks/tasks.state.js"></script>
<script src="modules/tasks/tasks.ui.js"></script>
<script src="modules/tasks/tasks.popup.js"></script>
<script src="modules/tasks/tasks.calendar.js"></script>
<script src="modules/tasks/tasks.controller.js"></script>
<script src="core/app.js"></script>

<!-- Service Worker -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js').catch(console.warn);
    });
  }
</script>

<!-- Language Switcher (SAMO JEDAN BLOK) -->
<script>
  function setLanguage(lang) {
    localStorage.setItem('userLang', lang);
    document.documentElement.setAttribute('lang', lang);
    if (window.I18N && typeof window.renderLanguage === 'function') {
      window.renderLanguage(lang);
    } else {
      location.reload();
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.lang-item').forEach(item => {
      item.addEventListener('click', () => {
        const lang = item.getAttribute('data-lang');
        setLanguage(lang);
      });
    });
  });
</script>

</body>
</html>