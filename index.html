<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>LifeKompas</title>

  <!-- âœ… CAVEAT FONT -->
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">

  <link rel="manifest" href="manifest-v2.json?v=2" />
  <link rel="icon" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="LifeKompas">
  <meta name="theme-color" content="#0d5e32">

  <link rel="stylesheet" href="styles/main.css">
</head>

<body>

<div class="app">

  <!-- LANGUAGE SCREEN -->
  <div id="screen-lang" class="screen active">
    <div class="lang-title-top">LIFE</div>
    <div class="lang-grid-container">
      <div class="lang-row">
        <button class="lang-btn" data-lang="hr">ğŸ‡­ğŸ‡· Hrvatski</button>
        <button class="lang-btn" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
      </div>
      <div class="lang-row">
        <button class="lang-btn" data-lang="de">ğŸ‡©ğŸ‡ª Deutsch</button>
        <button class="lang-btn" data-lang="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
      </div>
      <div class="lang-row">
        <button class="lang-btn" data-lang="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</button>
        <button class="lang-btn" data-lang="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</button>
      </div>
      <div class="lang-row">
        <button class="lang-btn" data-lang="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
        <button class="lang-btn" data-lang="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
      </div>
    </div>
    <div class="lang-title-bottom">KOMPAS</div>
  </div>

  <!-- MAIN MENU -->
  <div id="screen-menu" class="screen">
    <button class="back" id="backMenu">â†</button>
    <div class="main-menu-buttons">
      <button class="menu-item" id="btnObligations">ğŸ§­ Obveze</button>
      <button class="menu-item" id="btnContacts">ğŸ‘¥ Kontakti</button>
      <button class="menu-item" id="btnFinances">ğŸ’° Financije</button>
      <button class="menu-item" id="btnHealth">â¤ï¸ Zdravlje</button>
      <button class="menu-item" id="btnDiary">ğŸ““ Dnevnik</button>
    </div>
  </div>

  <!-- POPUP ZA OBVEZE -->
  <div id="obligationsPopup" class="popup-balloon">
    <div class="balloon-content">
      <button class="balloon-btn" id="btnAddObligation">â• Dodaj obvezu</button>
      <button class="balloon-btn" id="btnShopping">ğŸ›’ Kupovina</button>
      <button class="balloon-btn" id="btnViewObligations">ğŸ“… Pregled obveza</button>
    </div>
  </div>

</div> <!-- .app -->

<!-- SKRIPTOVE -->
<script src="core/i18n.js"></script>

<script>
  // SET LANGUAGE + SHOW MENU
  function setLanguage(lang) {
    localStorage.setItem('userLang', lang);
    document.documentElement.setAttribute('lang', lang);

    // Update menu button texts
    document.getElementById('btnObligations').textContent = I18N[lang].menu.obligations;
    document.getElementById('btnContacts').textContent = I18N[lang].menu.contacts;
    document.getElementById('btnFinances').textContent = I18N[lang].menu.finances;
    document.getElementById('btnHealth').textContent = I18N[lang].menu.health;
    document.getElementById('btnDiary').textContent = I18N[lang].menu.diary;

    // Switch screen
    document.getElementById('screen-lang').classList.remove('active');
    document.getElementById('screen-menu').classList.add('active');

    // Animate buttons
    setTimeout(() => {
      document.querySelectorAll('.menu-item').forEach((item, i) => {
        setTimeout(() => {
          item.classList.add('animate');
        }, 150 * i);
      });
    }, 50);
  }

  // EVENT LISTENERS
  document.addEventListener('DOMContentLoaded', () => {
    // Language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.addEventListener('click', e => {
        e.preventDefault();
        setLanguage(btn.dataset.lang);
      });
    });

    // Back button
    document.getElementById('backMenu').addEventListener('click', () => {
      document.getElementById('screen-menu').classList.remove('active');
      document.getElementById('screen-lang').classList.add('active');
      // Reset animation
      document.querySelectorAll('.menu-item').forEach(item => {
        item.classList.remove('animate');
      });
    });

    // Otvori popup za obveze
    document.getElementById('btnObligations').addEventListener('click', () => {
      const popup = document.getElementById('obligationsPopup');
      
      // AÅ¾uriraj tekst na trenutni jezik
      const lang = localStorage.getItem('userLang') || 'hr';
      document.getElementById('btnAddObligation').textContent = I18N[lang].menu.addObligation;
      document.getElementById('btnShopping').textContent = I18N[lang].menu.shopping;
      document.getElementById('btnViewObligations').textContent = I18N[lang].menu.viewObligations;

      // PrikaÅ¾i s animacijom
      popup.style.display = 'block';
      setTimeout(() => popup.classList.add('animate'), 10);
    });

    // Zatvori popup klikom izvan njega
    document.addEventListener('click', (e) => {
      const popup = document.getElementById('obligationsPopup');
      const btn = document.getElementById('btnObligations');
      if (popup.style.display === 'block' && !popup.contains(e.target) && e.target !== btn) {
        popup.classList.remove('animate');
        setTimeout(() => popup.style.display = 'none', 300);
      }
    });
  });
</script>

</body>
</html>