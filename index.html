<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>LifeKompas</title>

  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <!-- âœ… CAVEAT FONT -->
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">

  <link rel="manifest" href="manifest-v2.json?v=2" />
  <link rel="icon" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="LifeKompas">
  <meta name="theme-color" content="#0d5e32">

  <link rel="stylesheet" href="styles/main.css">
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
</head>

<body>

<div class="app">

<!-- STANDARD APP HEADER (UX STEP 1.1) -->
<div class="app-header">
  <div class="app-header-left">
    <button class="back" id="headerBack">â†</button>
  </div>

  <div class="app-header-center" id="headerTitle">
    LifeKompas
  </div>

  <div class="app-header-right">
    <!-- DESNA AKCIJA â€“ UI ONLY -->
    <button class="header-action hidden" id="headerAction" aria-label="action">
      â•
    </button>
  </div>
</div>

  <!-- LANGUAGE SCREEN -->
  <div id="screen-lang" class="screen active">
    <div class="lang-title-top">LIFE</div>
    <div class="lang-grid-container">
      <div class="lang-row">
        <button class="lang-btn" data-lang="hr">ğŸ‡­ğŸ‡· Hrvatski</button>
        <button class="lang-btn" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
      </div>
      <div class="lang-row">
        <button class="lang-btn" data-lang="de">ğŸ‡©ğŸ‡ª Deutsch</button>
        <button class="lang-btn" data-lang="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
      </div>
      <div class="lang-row">
        <button class="lang-btn" data-lang="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</button>
        <button class="lang-btn" data-lang="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</button>
      </div>
      <div class="lang-row">
  <button class="lang-btn" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
  <button class="lang-btn" data-lang="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
</div>
<div class="lang-row">
  <button class="lang-btn" data-lang="it">ğŸ‡®ğŸ‡¹ Italiano</button>
  <button class="lang-btn" data-lang="hu">ğŸ‡­ğŸ‡º Magyar</button>
</div>
    </div>
    <div class="lang-title-bottom">KOMPAS</div>
  </div>

  <!-- MAIN MENU -->
  <div id="screen-menu" class="screen menu-background">
    <div class="main-menu-buttons">
      <button class="menu-item" id="btnObligations">ğŸ§­ Obveze</button>
      <button class="menu-item" id="btnShopping">ğŸ›’ Kupovina</button>
      <button class="menu-item" id="btnContacts">ğŸ‘¥ Kontakti</button>
      <button class="menu-item" id="btnFinances">ğŸ’° Financije</button>
      <button class="menu-item" id="btnHealth">â¤ï¸ Zdravlje</button>
      <button class="menu-item" id="btnDiary">ğŸ““ Dnevnik</button>
    </div>
  </div>

<!-- FINANCES MENU SCREEN -->
<div id="screen-finances-menu" class="screen finance-background">
  <h2 class="screen-title">ğŸ’° Financije</h2>

  <div class="main-menu-buttons">
    <button class="menu-item" id="btnIncomeScreen">ğŸ’µ Unos prihoda</button>
    <button class="menu-item" id="btnMonthlyCostsScreen">ğŸ“… MjeseÄni troÅ¡kovi</button>
    <button class="menu-item" id="btnCreditsScreen">ğŸ¦ Krediti</button>
    <button class="menu-item" id="btnOtherCostsScreen">ğŸ›’ Ostali troÅ¡kovi</button>
    <button class="menu-item" id="btnCostsOverview">ğŸ“Š Pregled troÅ¡kova</button>
  </div>
</div>
<!-- FINANCE: INCOME SCREEN -->
<div id="screen-finance-income" class="screen finance-background">
  <h2 class="screen-title">ğŸ’µ Unos prihoda</h2>

  <div class="finance-form">
    <input type="number" id="incomeAmount" placeholder="Iznos (â‚¬)">
    <input type="text" id="incomeDesc" placeholder="Opis (npr. PlaÄ‡a)">
    <label class="finance-date-label" id="incomeDateLabel">Datum prihoda</label>
<input type="date" id="incomeDate">
    <button id="saveIncome">â• Dodaj prihod</button>
  </div>

  <div id="incomeList" class="finance-list"></div>
</div>


<!-- FINANCE: MONTHLY COSTS SCREEN -->
<div id="screen-finance-fixed" class="screen finance-background">
  <h2 class="screen-title">ğŸ“… MjeseÄni troÅ¡kovi</h2>

  <div class="finance-form">
    <input type="text" id="fixedDesc" placeholder="Naziv fiksnog troÅ¡ka (npr. Stanarina)">
    <input type="number" id="fixedAmount" placeholder="Iznos (â‚¬)">
    <button id="saveFixed">â• Dodaj fiksni troÅ¡ak</button>
  </div>

  <div id="fixedList" class="finance-list"></div>
</div>


<!-- FINANCE: CREDITS SCREEN -->
  <div id="screen-finance-credits" class="screen finance-background">
  <h2 class="screen-title">ğŸ¦ Krediti</h2>

  <div class="finance-form">
    <input type="text" id="creditDesc" placeholder="Naziv kredita (npr. Auto kredit)">
    <input type="number" id="creditAmount" placeholder="Iznos rate (â‚¬)">

    <label id="creditStartLabel">PoÄetak kredita</label>
<input type="date" id="creditStart">

<label id="creditEndLabel">ZavrÅ¡etak kredita</label>
<input type="date" id="creditEnd">

<label id="creditLastPaidLabel">Zadnja uplata</label>
<input type="date" id="creditLastPaid">

    <button id="saveCredit">â• Dodaj kredit</button>
  </div>

  <div id="creditList" class="finance-list"></div>
</div>
<!-- FINANCE: OTHER COSTS SCREEN -->
<div id="screen-finance-other" class="screen finance-background">
  <h2 class="screen-title">ğŸ§¾ Ostali troÅ¡kovi</h2>

  <!-- OTHER COST FORM -->
  <div class="finance-form">
    <input type="text" id="otherDesc" placeholder="Opis troÅ¡ka (npr. Gorivo)">
    <input type="number" id="otherAmount" placeholder="Iznos (â‚¬)">
    <button id="saveOther">â• Dodaj troÅ¡ak</button>
  </div>

  <!-- OTHER COST LIST -->
  <div id="otherList" class="finance-list"></div>
</div>
<!-- FINANCE: COSTS OVERVIEW SCREEN -->
<div id="screen-finance-overview" class="screen finance-background">
  <h2 class="screen-title">ğŸ“Š Pregled troÅ¡kova</h2>

  <div class="finance-form">
  <label id="financeMonthLabel"></label>
  <input type="month" id="financeMonth">
  <button id="btnCalculateMonth">IzraÄunaj</button>
</div>

  <div id="monthResult" class="finance-list"></div>
</div>

  <!-- SHOPPING SCREEN -->
  <div id="screen-shopping" class="screen">

    <h2 class="screen-title" id="shoppingTitle">ğŸ›’ Kupovina</h2>

    <div class="shopping-addbar">
      <input
        id="shoppingInput"
        type="text"
        autocomplete="off"
        inputmode="text"
        placeholder="Dodaj stavku i stisni Enter"
      />
    </div>
<button id="btnScanReceipt" class="scan-receipt-btn">
  â•
</button>

    <button id="toggleArchive" class="archive-toggle">
  PrikaÅ¾i arhivu
</button>

<div id="shoppingSwipeHint" class="swipe-hint hidden">
  â† Povuci ulijevo za brisanje
</div>

<ul id="shoppingList" class="shopping-list"></ul>

<div id="shoppingEmpty" class="empty-state">
      <div class="empty-emoji">ğŸ›’</div>
      <div class="empty-title" id="shoppingEmptyTitle">Nema stavki</div>
      <div class="empty-sub" id="shoppingEmptySub">
        Dodaj prvu stavku gore.
      </div>
    </div>
  </div>

  <!-- POPUP ZA OBVEZE -->
  <div id="obligationsPopup" class="popup-balloon">
    <div class="balloon-content">
      <button class="balloon-btn" id="btnAddObligation">â• Dodaj obvezu</button>
      <button class="balloon-btn" id="btnViewObligations">ğŸ“… Pregled obveza</button>
    </div>
  </div>

  <!-- EKRAN: DODAVANJE/UREÄIVANJE OBVEZE -->
  <div id="screen-add-obligation" class="screen">
    <div class="obligation-form">
      <input type="text" id="obligationTitle" placeholder="Naslov obveze" maxlength="100">
      <textarea id="obligationNote" placeholder="Napomena" rows="3"></textarea>

      <label class="datetime-label">
        <span id="obligationDateTimeLabel">Datum i vrijeme</span>
        <input type="datetime-local" id="obligationDateTime">
      </label>

      <label class="reminder-checkbox">
        <input type="checkbox" id="enableReminder">
        <span id="reminderLabel">Podsjetnik</span>
      </label>
      <label class="reminder-checkbox">
        <input type="checkbox" id="urgentObligation">
        <span id="urgentLabel"></span>
     </label>

      <div id="reminderOptions" class="hidden">
        <select id="reminderTime">
  <option value="30"></option>
  <option value="60"></option>
  <option value="120"></option>
  <option value="1440"></option>
</select>
      </div>
<label class="repeat-label">
  <span id="repeatLabel"></span>
  <select id="repeatType">
    <option value="">Bez ponavljanja</option>
    <option value="daily"></option>
    <option value="weekly"></option>
  </select>
</label>
<label class="quiet-hours-label">
  <span id="quietHoursLabel"></span>
  <div class="quiet-hours-row">
    <input type="time" id="quietStart" value="22:00">
    <span>â€“</span>
    <input type="time" id="quietEnd" value="07:00">
  </div>
</label>

      <button id="saveObligation" class="btn-save">ğŸ’¾ Spremi</button>
      <button id="cancelObligation" class="btn-cancel"></button>
    </div>
  </div>

  <!-- EKRAN: PREGLED OBVEZA -->
  <div id="screen-obligations-list" class="screen">
  <div class="calm-surface">

    <!-- TOOLBAR -->
    <div class="obligations-toolbar">
      <button id="btnViewByDays" class="toolbar-btn">
        ğŸ“† Pregled po danima
      </button>
    </div>

    <!-- DATE PICKER â€“ samo za daily view -->
    <div id="dailyDateBar" class="hidden" style="padding: 8px 12px;">
      <input
        type="date"
        id="dailyDatePicker"
        style="width:100%; padding:10px; border-radius:10px; border:1px solid rgba(0,0,0,0.15);"
      >
    </div>

    <!-- LIST VIEW -->
    <div id="obligationsContainer" class="obligations-list"></div>

    <!-- DAILY VIEW -->
    <div id="dailyView" class="hidden" style="padding: 0 12px 16px;">
      <div id="dailyOpenWrap"></div>
      <div id="dailyDoneWrap"></div>
    </div>
  </div> <!-- calm-surface -->
</div> <!-- /screen-obligations-list -->

<!-- CONTACT FORM SCREEN -->
<div id="screen-contact-form" class="screen">

  <h2 class="screen-title" id="contactFormTitle">
    <img src="images/contacts-icon.png" class="contacts-title-icon">
    Novi kontakt
  </h2>

  <div class="contact-form">

    <input type="text" id="contactFirstName" placeholder="">
    <input type="text" id="contactLastName" placeholder="">
    <input type="text" id="contactBirthDate" placeholder="">

    <label class="contact-form-label" id="contactBirthdayTimeLabel"></label>
    <input type="time" id="contactBirthdayTime">

    <input type="text" id="contactAddress" placeholder="">
    <input type="email" id="contactEmail" placeholder="">
    <input type="tel" id="contactPhone" placeholder="">

    <!-- PHOTO PICKER -->
    <button id="btnPickContactPhoto"></button>
    <input type="hidden" id="contactPhotoData">

    <button id="saveContact"></button>

  </div>
</div>

<!-- CONTACT DETAILS SCREEN -->
<div id="screen-contact-details" class="screen finance-background">

  <h2 class="screen-title" id="contactDetailsTitle">ğŸ‘¤ Kontakt</h2>

  <div class="calm-surface">
    <div id="contactDetailsContent" class="contact-details"></div>
</div>

  <!-- ACTION BUTTONS -->
  <div class="contact-details-actions">
    <button id="btnEditContact"></button>
    <button id="btnDeleteContact"></button>
  </div>
</div>

<!-- CONTACTS SCREEN -->
<div id="screen-contacts" class="screen">

  <!-- ACTION BUTTONS -->
<div class="contacts-actions">
  <button id="btnImportContacts"
          class="menu-item"
          onclick="importDeviceContacts()">
    ğŸ“¥ Uvezi iz imenika
  </button>
</div>

  <!-- SEARCH -->
  <div class="contacts-search">
    <input type="text" id="searchContacts" placeholder="Search...">
  </div>

  <!-- LIST -->
  <div id="contactsList" class="contacts-list"></div>
</div>

<!-- APP VERSION -->
<div id="appVersion" style="
  position: fixed;
  bottom: 4px;
  right: 8px;
  font-size: 11px;
  opacity: 0.6;
  pointer-events: none;
"></div>

<!-- SKRIPTOVE -->

<script src="core/i18n.js"></script>
<script type="module" src="core/main.js"></script>

</script>

</body>
</html>