<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>LifeKompas</title>

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}

/* BACKGROUNDS */
body.home{
  background:linear-gradient(120deg,#1f6b4a,#2e8b57,#3fa37a,#2e8b57);
  background-size:400% 400%;
  animation:bgMove 12s ease-in-out infinite;
}
body.static{
  background:linear-gradient(to top,#d0f0c0,#a8e6cf,#61c09a,#2e8b57);
}
@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.app{position:relative;height:100%}

/* SCREENS */
.screen{
  position:absolute;inset:0;
  display:flex;justify-content:center;align-items:center;
  opacity:0;pointer-events:none;
  transition:.25s ease;
}
.screen.active{opacity:1;pointer-events:auto}

/* CONTENT */
.content{
  width:100%;
  max-width:420px;
  padding:2rem 1.5rem;
  text-align:center;
}
.scroll{
  max-height:100%;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}

/* TITLE */
.title{
  font-size:4rem;font-weight:900;line-height:1;margin-bottom:2rem;
}
.title span{
  display:block;
  background:linear-gradient(180deg,#000 40%,#ff8c00 60%,#ff4500);
  background-size:100% 200%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:fireGlow 3s infinite;
}
@keyframes fireGlow{
  0%{background-position:0% 0%}
  50%{background-position:0% 100%}
  100%{background-position:0% 0%}
}

/* UI */
.buttons{display:flex;flex-direction:column;gap:1rem;align-items:center}
.btn{
  width:100%;
  max-width:280px;
  padding:.9rem;
  border:none;border-radius:50px;
  font-size:1.1rem;font-weight:600;
  background:rgba(255,255,255,.85);
}

/* BACK BUTTON iOS-safe */
.back{
  position:fixed;
  top:1rem;right:1rem;
  z-index:9999;
  border:none;border-radius:20px;
  padding:.4rem .9rem;
  background:rgba(255,255,255,.9);
}

/* FORM */
label{
  display:block;text-align:left;
  font-size:.9rem;margin-top:1rem;opacity:.8;
}
input,textarea,select{
  width:100%;
  padding:12px;margin-top:4px;
  border-radius:12px;border:none;
  font-size:16px;
}
textarea{resize:vertical}

/* TASK CARD */
.task{
  background:rgba(255,255,255,.9);
  border-radius:14px;
  padding:12px;
  margin-top:12px;
  text-align:left;
}
.task-actions{
  display:flex;
  justify-content:space-between;
  margin-top:8px;
}
.task-actions button{
  border:none;background:none;
  font-size:1.1rem;
}
</style>
</head>

<body class="home">
<div class="app">

<!-- LANGUAGE -->
<div id="screen-lang" class="screen active">
  <div class="content">
    <h1 class="title"><span>Life</span><span>Kompas</span></h1>
    <div class="buttons">
      <button class="btn" id="langHr">üá≠üá∑ Hrvatski</button>
      <button class="btn" id="langDe">üá©üá™ Deutsch</button>
      <button class="btn" id="langEn">üá¨üáß English</button>
    </div>
  </div>
</div>

<!-- MENU -->
<div id="screen-menu" class="screen">
  <button class="back" id="backMenu">‚Üê</button>
  <div class="content">
    <div class="buttons">
      <button class="btn" id="btnDiary"></button>
      <button class="btn" id="btnTasks"></button>
    </div>
  </div>
</div>

<!-- DIARY -->
<div id="screen-diary" class="screen">
  <button class="back" id="backDiary">‚Üê</button>
  <div class="content scroll">
    <label id="lblDDate"></label>
    <input type="date" id="dDate">
    <label id="lblDTitle"></label>
    <input id="dTitle">
    <label id="lblDText"></label>
    <textarea id="dText" rows="6"></textarea>
    <button class="btn" id="btnSaveDiary"> </button>
  </div>
</div>

<!-- TASKS -->
<div id="screen-tasks" class="screen">
  <button class="back" id="backTasks">‚Üê</button>
  <div class="content scroll">

    <label id="lblTask"></label>
    <input id="taskTitle">

    <label id="lblNote"></label>
    <textarea id="taskNote" rows="3"></textarea>

    <label id="lblCategory"></label>
    <select id="taskCategory"></select>

    <label id="lblDate"></label>
    <input type="date" id="taskDate">

    <label id="lblTime"></label>
    <input type="time" id="taskTime">

    <label id="lblReminder"></label>
    <select id="taskReminder">
      <option value="0">‚Äî</option>
      <option value="15">15 min</option>
      <option value="30">30 min</option>
      <option value="60">60 min</option>
      <option value="1440">1 day</option>
    </select>

    <button class="btn" id="btnSaveTask"></button>

    <div id="taskList"></div>
  </div>
</div>

</div>

<script>
/* ===== I18N ===== */
const T={
  hr:{
    diary:"üìî Dnevnik", tasks:"üìã Obveze",
    ddate:"Datum", dtitle:"Naslov", dtext:"Tekst", save:"üíæ Spremi",
    task:"Obveza", note:"Bilje≈°ka", cat:"Kategorija",
    date:"Datum", time:"Vrijeme", rem:"Podsjetnik",
    saveTask:"üíæ Spremi obvezu",
    cats:{health:"Zdravlje",family:"Obitelj",finance:"Financije",personal:"Osobno",other:"Ostalo"}
  },
  de:{
    diary:"üìî Tagebuch", tasks:"üìã Aufgaben",
    ddate:"Datum", dtitle:"Titel", dtext:"Text", save:"üíæ Speichern",
    task:"Aufgabe", note:"Notiz", cat:"Kategorie",
    date:"Datum", time:"Zeit", rem:"Erinnerung",
    saveTask:"üíæ Aufgabe speichern",
    cats:{health:"Gesundheit",family:"Familie",finance:"Finanzen",personal:"Pers√∂nlich",other:"Sonstiges"}
  },
  en:{
    diary:"üìî Diary", tasks:"üìã Tasks",
    ddate:"Date", dtitle:"Title", dtext:"Text", save:"üíæ Save",
    task:"Task", note:"Note", cat:"Category",
    date:"Date", time:"Time", rem:"Reminder",
    saveTask:"üíæ Save task",
    cats:{health:"Health",family:"Family",finance:"Finance",personal:"Personal",other:"Other"}
  }
};

let lang="hr";
let tasks=[];

/* ===== HELPERS ===== */
function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
function applyLang(){
  btnDiary.textContent = T[lang].diary;
  btnTasks.textContent = T[lang].tasks;

  lblDDate.textContent = T[lang].ddate;
  lblDTitle.textContent = T[lang].dtitle;
  lblDText.textContent = T[lang].dtext;
  btnSaveDiary.textContent = T[lang].save;

  lblTask.textContent = T[lang].task;
  lblNote.textContent = T[lang].note;
  lblCategory.textContent = T[lang].cat;
  lblDate.textContent = T[lang].date;
  lblTime.textContent = T[lang].time;
  lblReminder.textContent = T[lang].rem;
  btnSaveTask.textContent = T[lang].saveTask;

  taskCategory.innerHTML="";
  for(const k in T[lang].cats){
    const o=document.createElement("option");
    o.value=k;
    o.textContent=T[lang].cats[k];
    taskCategory.appendChild(o);
  }
}
function selectLang(l){
  lang=l;
  localStorage.setItem("lang", l);
  applyLang();
  document.body.className="static";
  show("screen-menu");
}
function goHome(){
  document.body.className="home";
  show("screen-lang");
}

/* ===== DIARY ===== */
function openDiary(){
  dDate.value = new Date().toISOString().slice(0,10);
  show("screen-diary");
}
function saveDiary(){
  localStorage.setItem("d-"+dDate.value, JSON.stringify({t:dTitle.value, x:dText.value}));
}

/* ===== TASKS ===== */
function openTasks(){
  tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
  renderTasks();
  show("screen-tasks");
}
function saveTask(){
  tasks.push({
    id: Date.now(),
    title: taskTitle.value,
    note: taskNote.value,
    cat: taskCategory.value,
    date: taskDate.value,
    time: taskTime.value,
    rem: taskReminder.value
  });
  localStorage.setItem("tasks", JSON.stringify(tasks));

  taskTitle.value="";
  taskNote.value="";
  taskDate.value="";
  taskTime.value="";
  taskReminder.value="0";

  renderTasks();
}
function renderTasks(){
  taskList.innerHTML="";
  tasks.forEach(t=>{
    const d=document.createElement("div");
    d.className="task";
    d.innerHTML = `
      <strong>${t.title || ""}</strong> (${T[lang].cats[t.cat] || ""})<br>
      <small>${t.date || ""} ${t.time || ""}</small><br>
      <small>${t.note || ""}</small>
    `;
    taskList.appendChild(d);
  });
}

/* ===== INIT ===== */
window.addEventListener("load", ()=>{
  // bind language buttons
  langHr.addEventListener("click", ()=>selectLang("hr"));
  langDe.addEventListener("click", ()=>selectLang("de"));
  langEn.addEventListener("click", ()=>selectLang("en"));

  // bind nav
  backMenu.addEventListener("click", goHome);
  backDiary.addEventListener("click", ()=>show("screen-menu"));
  backTasks.addEventListener("click", ()=>show("screen-menu"));

  // bind menu actions
  btnDiary.addEventListener("click", openDiary);
  btnTasks.addEventListener("click", openTasks);

  // bind saves
  btnSaveDiary.addEventListener("click", saveDiary);
  btnSaveTask.addEventListener("click", saveTask);

  // restore language
  const saved = localStorage.getItem("lang");
  if(saved && T[saved]) lang = saved;
  applyLang();
});
</script>

</body>
</html>
