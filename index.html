<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LifeKompas</title>

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  width:100%;
  height:100%;
  overflow-x:hidden;
}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#1f6f4a,#2e8b57);
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
}

/* SCREENS */
.screen{
  display:none;
  width:100%;
  max-width:420px;
  padding:20px;
}
.screen.active{display:block}

/* ğŸ”¥ FIRE TITLE â€“ STABILNO ANDROID + IOS */
.fire{
  font-size:3.6rem;
  font-weight:900;
  text-align:center;
  background:linear-gradient(
    to bottom,
    #000000 0%,
    #000000 50%,
    #ff7a00 50%,
    #ff7a00 100%
  );
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:
    0 0 6px rgba(255,140,0,0.9),
    0 0 12px rgba(255,69,0,0.7),
    0 0 18px rgba(255,0,0,0.4);
  margin-bottom:2.2rem;
}

/* BUTTONS */
.buttons{
  display:flex;
  flex-direction:column;
  gap:14px;
}
button{
  padding:14px;
  font-size:1.05rem;
  border-radius:30px;
  border:none;
  cursor:pointer;
  background:rgba(255,255,255,0.9);
}

/* TOP RIGHT */
.top-right{
  position:absolute;
  top:15px;
  right:15px;
}

/* FORM */
input,textarea{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:12px;
  border:none;
  font-size:1rem;
}
textarea{resize:vertical}

/* MOODS */
.moods{
  display:flex;
  justify-content:space-around;
  font-size:2.2rem;
  margin:12px 0;
}
.moods span{
  cursor:pointer;
  opacity:0.4;
}
.moods span.active{opacity:1}

/* ACTION BUTTONS */
.actions{
  display:flex;
  gap:6px;
  flex-wrap:nowrap; /* ğŸ”‘ NEMA LOMLJENJA */
}
.actions button{
  flex:1;
  padding:12px;
  font-size:0.95rem;
  white-space:nowrap;
}

/* ğŸ‡©ğŸ‡ª ONLY */
.actions.de button{
  font-size:0.8rem;
  padding:10px 6px;
}
</style>
</head>

<body>

<!-- HOME -->
<div id="home" class="screen active">
  <div class="fire">LifeKompas</div>
  <div class="buttons">
    <button onclick="selectLang('hr')">ğŸ‡­ğŸ‡· Hrvatski</button>
    <button onclick="selectLang('de')">ğŸ‡©ğŸ‡ª Deutsch</button>
    <button onclick="selectLang('en')">ğŸ‡¬ğŸ‡§ English</button>
  </div>
</div>

<!-- MENU -->
<div id="menu" class="screen">
  <button class="top-right" onclick="show('home')">â†</button>
  <div class="buttons">
    <button onclick="openDiary()" id="btnDiary"></button>
  </div>
</div>

<!-- DIARY -->
<div id="diary" class="screen">
  <button class="top-right" onclick="show('menu')">â†</button>

  <input type="date" id="date">
  <input type="text" id="title">
  <textarea id="text" rows="6"></textarea>

  <div class="moods">
    <span onclick="setMood('ğŸ˜Š')">ğŸ˜Š</span>
    <span onclick="setMood('ğŸ˜')">ğŸ˜</span>
    <span onclick="setMood('ğŸ˜')">ğŸ˜</span>
  </div>

  <div id="actions" class="actions">
    <button id="btnSave" onclick="saveEntry()"></button>
    <button id="btnEdit" onclick="loadEntry()"></button>
    <button id="btnDelete" onclick="deleteEntry()"></button>
  </div>
</div>

<script>
let lang=localStorage.getItem("lang")||"hr";
let mood="";

const T={
  hr:{diary:"ğŸ“” Dnevnik",title:"Naslov dana",text:"DogaÄ‘anja...",save:"ğŸ’¾ Spremi",edit:"âœï¸ Uredi",del:"ğŸ—‘ ObriÅ¡i"},
  de:{diary:"ğŸ“” Tagebuch",title:"Titel des Tages",text:"Ereignisse...",save:"ğŸ’¾ Speichern",edit:"âœï¸ Bearbeiten",del:"ğŸ—‘ LÃ¶schen"},
  en:{diary:"ğŸ“” Diary",title:"Day title",text:"Events...",save:"ğŸ’¾ Save",edit:"âœï¸ Edit",del:"ğŸ—‘ Delete"}
};

function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function applyLang(){
  btnDiary.textContent=T[lang].diary;
  title.placeholder=T[lang].title;
  text.placeholder=T[lang].text;
  btnSave.textContent=T[lang].save;
  btnEdit.textContent=T[lang].edit;
  btnDelete.textContent=T[lang].del;

  document.getElementById("actions")
    .classList.toggle("de",lang==="de");
}

function selectLang(l){
  lang=l;
  localStorage.setItem("lang",l);
  applyLang();
  show("menu");
}

function openDiary(){
  date.value=new Date().toISOString().slice(0,10);
  loadEntry();
  show("diary");
}

function setMood(m){
  mood=m;
  document.querySelectorAll(".moods span").forEach(s=>s.classList.remove("active"));
  [...document.querySelectorAll(".moods span")].find(s=>s.textContent===m).classList.add("active");
}

function saveEntry(){
  localStorage.setItem("diary-"+date.value,JSON.stringify({title:title.value,text:text.value,mood}));
  alert("OK");
}

function loadEntry(){
  const s=localStorage.getItem("diary-"+date.value);
  if(!s)return;
  const e=JSON.parse(s);
  title.value=e.title;
  text.value=e.text;
  if(e.mood)setMood(e.mood);
}

function deleteEntry(){
  localStorage.removeItem("diary-"+date.value);
  title.value="";
  text.value="";
  mood="";
  document.querySelectorAll(".moods span").forEach(s=>s.classList.remove("active"));
}

applyLang();
</script>

</body>
</html>
